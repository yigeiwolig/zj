# checkUnlockStatus 云函数部署说明

## 功能说明
检测管理员在 `login_logs` 中开启的开关（`autoEntry` 或 `allowRetry`），并执行相应的数据库操作。

## 部署步骤

1. **右键点击 `checkUnlockStatus` 文件夹**
   - 选择"上传并部署：云端安装依赖"
   - 等待部署完成

2. **验证部署**
   - 在微信开发者工具中查看云函数列表
   - 确认 `checkUnlockStatus` 出现在列表中

## 功能说明

### 场景 A: autoEntry = true
- 自动将昵称添加到 `valid_users` 表
- 解除封禁状态
- 返回 `PASS` 指令，前端直接放行到产品页

### 场景 B: allowRetry = true
- 重置封禁状态和错误计数
- 返回 `RETRY` 指令，前端跳回首页重新验证

### 场景 C: 无操作
- 返回 `WAIT` 指令，继续等待

## 注意事项
- 云函数会自动关闭使用过的开关（`autoEntry` 和 `allowRetry`）
- 前端每 3 秒轮询一次云函数
- 确保 `login_logs` 表中有对应的记录

