# 数据库集合说明

## 集合列表及用途

### 1. **app_config** - 应用配置
- **用途**: 存储应用全局配置信息
- **主要数据**: 
  - `blocking_rules`: 封禁规则配置（包含 `is_active` 字段，用于管理员审核模式）
- **使用位置**: `index.js`, `my.js`

### 2. **azjc** - 产品/配件数据
- **用途**: 存储产品相关数据
- **使用位置**: `azjc.js`

### 3. **blocked_logs** - 封禁日志
- **用途**: 记录被封禁用户的信息和日志
- **使用位置**: `index.js` (高危地址分析)

### 4. **guanliyuan** - 管理员集合
- **用途**: 存储管理员 openid，用于权限验证
- **字段**: `openid` 或 `_openid`
- **使用位置**: 所有需要管理员权限的页面和云函数

### 5. **home** - 首页数据
- **用途**: 存储首页展示的门店信息、测试模式开关等
- **主要数据**:
  - `testModeSwitch`: 测试模式开关
  - 门店信息列表
- **使用位置**: `home.js`

### 6. **login_logbutton** - 登录按钮日志
- **用途**: 记录登录按钮点击日志（可能已废弃）

### 7. **login_logs** - 登录日志
- **用途**: 记录用户登录信息，包含封禁状态
- **主要字段**: 
  - `_openid`: 用户 openid
  - `isBanned`: 是否被封禁
  - `updateTime`: 更新时间
- **使用位置**: `index.js`

### 8. **moto_records_cloud** - 摩托车记录（云端）
- **用途**: 存储摩托车相关记录数据
- **使用位置**: `paihang.js` (排行榜相关)

### 9. **my_read** - 我的阅读/审核记录
- **用途**: 存储用户阅读记录，包含待审核状态
- **主要字段**:
  - `status`: 状态（如 'PENDING' 待审核）
  - `_openid`: 用户 openid
- **使用位置**: `my.js`

### 10. **ota_connections** - OTA 连接记录
- **用途**: 记录 OTA（Over-The-Air）更新连接信息
- **使用位置**: `ota.js`

### 11. **products** - 产品数据
- **用途**: 存储产品基本信息
- **使用位置**: `products.js`, `pagenew.js`

### 12. **shop_accessories** - 商店配件
- **用途**: 存储商店中可购买的配件信息
- **使用位置**: `shop.js`

### 13. **shop_config** - 商店配置
- **用途**: 存储商店相关配置
- **主要数据**:
  - `shopTitle`: 商店标题
  - `topMedia`: 顶部媒体列表
- **使用位置**: `shop.js`

### 14. **shop_orders** - 商店订单
- **用途**: 存储用户购买订单信息
- **主要字段**:
  - `_openid`: 用户 openid
  - `status`: 订单状态（UNPAID, PAID, SHIPPED, SIGNED 等）
  - `createTime`: 创建时间
- **使用位置**: `shop.js`, `my.js`, `createOrder/index.js`, `adminGetOrders/index.js`, `adminUpdateOrder/index.js`

### 15. **shop_series** - 商店系列
- **用途**: 存储商品系列分类信息
- **使用位置**: `shop.js`

### 16. **shouhou** - 售后数据
- **用途**: 存储售后配件、维修教程等数据
- **主要字段**:
  - `modelName`: 型号名称
  - `parts`: 配件列表
- **使用位置**: `shouhou.js`

### 17. **shouhou_read** - 售后阅读记录
- **用途**: 记录用户阅读售后内容的记录
- **使用位置**: `shouhou.js`

### 18. **shouhou_repair** - 售后维修工单
- **用途**: 存储故障报修工单信息
- **主要字段**:
  - `_openid`: 用户 openid
  - `status`: 状态（PENDING, SHIPPED, TUTORIAL, USER_SENT, REPAIR_COMPLETED_SENT 等）
  - `needReturn`: 是否需要用户寄回
  - `returnStatus`: 寄回状态
  - `returnTrackingId`: 用户寄回的运单号
  - `trackingId`: 管理员寄出的运单号
  - `returnAddress`: 用户填写的寄回地址
  - `contact`: 用户联系信息（姓名、电话、地址）
- **使用位置**: `shouhou.js`, `my.js`, `adminGetOrders/index.js`

### 19. **shouhouvideo** - 售后视频
- **用途**: 存储售后维修视频数据
- **主要字段**:
  - `groupName`: 分组名称
  - `order`: 排序
- **使用位置**: `shouhou.js`

### 20. **sn** - 设备序列号
- **用途**: 存储设备绑定信息，关联用户和设备
- **主要字段**:
  - `_openid`: 用户 openid
  - `sn`: 设备序列号
- **使用位置**: `my.js`, `bindDevice/index.js`, `unbindDevice/index.js`

### 21. **system_config** - 系统配置
- **用途**: 存储系统级配置信息
- **使用位置**: 系统配置相关功能

### 22. **user_list** - 用户列表
- **用途**: 存储用户信息列表（可能包含白名单用户）
- **使用位置**: `home.js`, `index.js` (高危地址分析)

### 23. **valid_users** - 有效用户
- **用途**: 存储有效/合法用户列表
- **使用位置**: 用户验证相关功能

### 24. **video** - 视频数据
- **用途**: 存储视频内容信息
- **主要字段**:
  - `_openid`: 用户 openid
- **使用位置**: `my.js`, `case.js`

### 25. **video_go** - 视频相关数据
- **用途**: 可能用于视频播放记录或视频跳转相关数据
- **使用位置**: 视频相关功能

---

## 数据关系说明

### 用户相关
- `login_logs`: 用户登录记录和封禁状态
- `sn`: 用户绑定的设备
- `shop_orders`: 用户的购买订单
- `shouhou_repair`: 用户的维修工单
- `video`: 用户上传的视频
- `my_read`: 用户的阅读记录

### 管理员相关
- `guanliyuan`: 管理员权限验证
- `app_config`: 管理员审核模式配置

### 商店相关
- `shop_config`: 商店配置
- `shop_series`: 商品系列
- `shop_accessories`: 配件列表
- `shop_orders`: 订单记录

### 售后相关
- `shouhou`: 售后配件和教程
- `shouhou_repair`: 维修工单
- `shouhouvideo`: 维修视频
- `shouhou_read`: 阅读记录





