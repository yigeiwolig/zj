/* é¡¶éƒ¨å¯¼èˆª */
.header {
  position: fixed; top: 0; left: 0; right: 0; height: 180rpx;
  padding-top: calc(env(safe-area-inset-top, 0px) + 88rpx); 
  padding-left: 40rpx; 
  padding-right: 40rpx;
  box-sizing: border-box; 
  display: flex; 
  justify-content: space-between; 
  align-items: center;
  z-index: 10000; 
  pointer-events: none;
  background: transparent; 
}

/* ğŸ”´ ç»Ÿä¸€è¿”å›é”®æ ·å¼ - å…¨å±€æ ‡å‡†ï¼ˆOTAé¡µé¢ä½¿ç”¨ç™½è‰²ç®­å¤´ï¼‰ */
.back-icon {
  position: absolute;
  left: 40rpx;
  top: calc(env(safe-area-inset-top, 0px) + 88rpx);
  width: 70rpx;
  height: 70rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  transition: all 0.2s;
  z-index: 10001;
}
.back-icon:active {
  transform: scale(0.95);
  opacity: 0.7;
  background-color: rgba(255, 255, 255, 0.1);
}
.back-icon::before {
  display: none;
}

/* ç»Ÿä¸€è¿”å›ç®­å¤´æ ·å¼ï¼ˆOTAé¡µé¢ä½¿ç”¨ç™½è‰²ï¼‰ */
.back-arrow {
  font-size: 48rpx;
  font-weight: 300;
  color: #fff;
  line-height: 1;
}

.ota-back {
  position: fixed;
  top: 80rpx;
  left: 30rpx;
  z-index: 500;
  width: 96rpx;
  height: 96rpx;
  border-radius: 48rpx;
  background: rgba(255,255,255,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10px);
  box-shadow: 0 4rpx 20rpx rgba(255,255,255,0.2);
  border: 1rpx solid rgba(255,255,255,0.3);
}

.ota-back-icon {
  line-height: 1;
  color: #ffffff;
  font-size: 60rpx;
  font-weight: bold;
  text-shadow: 0 2rpx 8rpx rgba(0,0,0,0.3);
}
page {
  background: #000;
  height: 100vh;
  overflow: hidden;
  font-family: "Helvetica Neue", Arial, sans-serif;
  color: #fff;
}

.particle-canvas {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  z-index: 1; pointer-events: none;
}

/* çµåŠ¨å²›ï¼šå®Œå…¨éšè— */
.dynamic-island {
  position: fixed; top: -150px; left: 50%;
  transform: translateX(-50%); width: 240px; height: 50px;
  background: #fff; border-radius: 30px;
  display: flex; align-items: center; justify-content: center;
  transition: top 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 999; box-shadow: 0 5px 20px rgba(255,255,255,0.2);
}
.dynamic-island.active { top: 60px; }
.island-content { display: flex; gap: 10px; align-items: center; font-weight: bold; font-size: 13px; }
.island-icon { font-size: 18px; font-weight: bold; line-height: 1; }
.text-black { color: #000; }
.text-red { color: #FF3B30; }

/* Loader */
.loader-wrapper {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  z-index: 100; display: flex; flex-direction: column; align-items: center;
  transition: opacity 0.8s ease;
}
.loader-wrapper.fade-out { opacity: 0; pointer-events: none; }

.container-loader {
  width: 280px; height: 280px;
  position: relative;
  transform-style: preserve-3d; transform: perspective(500px) rotateX(60deg);
  animation: floatBig 3s ease-in-out infinite alternate;
}
@keyframes floatBig {
  0% { transform: perspective(500px) rotateX(60deg) translateY(-50px); }
  100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
}

.aro {
  position: absolute;
  top: calc(var(--s) * 8px); left: calc(var(--s) * 8px);
  right: calc(var(--s) * 8px); bottom: calc(var(--s) * 8px);
  box-shadow: inset 0 0 40px rgba(255,255,255,0.9);
  border: 1px solid rgba(255,255,255,0.3);
  clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
  animation: strim 3s infinite ease-in-out both;
  animation-delay: calc(var(--s) * -0.1s);
  background: rgba(255, 255, 255, 0.02);
}
@keyframes strim {
  0%, 100% { transform: translateZ(-80px) rotate(0deg); }
  50% { transform: translateZ(80px) rotate(90deg); }
}

.click-hint {
  margin-top: 80px; font-size: 14px; letter-spacing: 2px; font-weight: bold;
  text-transform: uppercase; color: #fff; text-shadow: 0 0 10px #fff;
  animation: blink 2s infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.5} }

/* èˆå° */
.stage-layer {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  pointer-events: none; z-index: 10;
  opacity: 0; transition: opacity 0.5s;
}
.stage-layer.active { opacity: 1; pointer-events: auto; }

.selector-center {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 100%; text-align: center;
  transition: opacity 0.5s; z-index: 200;
}
.selector-center.fade-out { opacity: 0; pointer-events: none; }

.carousel { display: flex; align-items: center; justify-content: center; gap: 40px; }
.device-selector-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
}
.device-icon-preview {
  width: 200px;
  height: 140px;
  display: block;
  opacity: 0.9;
  cursor: pointer; /* æ·»åŠ æŒ‡é’ˆæ ·å¼ï¼Œæç¤ºå¯ç‚¹å‡» */
  transition: opacity 0.2s, transform 0.2s; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
}
.device-icon-preview:active {
  opacity: 0.7; /* ç‚¹å‡»æ—¶é™ä½é€æ˜åº¦ï¼Œæä¾›è§†è§‰åé¦ˆ */
  transform: scale(0.95); /* ç‚¹å‡»æ—¶ç¨å¾®ç¼©å°ï¼Œæä¾›è§¦è§‰åé¦ˆ */
}
.device-name { 
  font-size: 48px; font-weight: 900; font-style: italic; 
  text-shadow: 0 0 20px #fff; transition: transform 0.2s; padding: 20px; 
}
.device-name:active { transform: scale(0.9); }
.arrow { font-size: 50px; color: #666; padding: 20px; }

/* æ³¨å…¥æ˜¾å½¢ç›’å­ */
.reveal-box {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 300px; height: 220px;
  z-index: 50; overflow: visible; 
}

.reveal-mask {
  position: absolute;
  bottom: 0; left: 0; width: 100%;
  height: 0%; 
  overflow: hidden; 
  transition: height 0.1s linear;
  display: flex; align-items: flex-end; 
}

/* æš´åŠ›å˜ç™½ï¼šå…ˆå˜å…¨é»‘(brightness 0)ï¼Œå†å½»åº•åè½¬(invert 1) */
.force-white {
  filter: brightness(0) invert(1) drop-shadow(0 0 5px rgba(255,255,255,0.8));
  /* ç¡®ä¿ä¸é€æ˜ */
  opacity: 1; 
}
.device-svg {
  width: 300px; height: 220px; 
  display: block;
}

.shaking { animation: shake 0.05s infinite; }
@keyframes shake { 0% { transform: translate(-50%, -50%); } 50% { transform: translate(-51%, -51%); } 100% { transform: translate(-50%, -50%); } }

/* ç»“å°¾ MT */
.mt-end {
  position: absolute; top: 40%; left: 50%;
  transform: translate(-50%, -50%) scale(0.5);
  font-size: 140px; font-weight: 900; color: #fff;
  text-shadow: 0 0 50px rgba(255,255,255,0.9);
  opacity: 0; transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  z-index: 50; letter-spacing: -5px; font-family: "Arial Black", sans-serif;
}
.mt-end.active { opacity: 1; transform: translate(-50%, -50%) scale(1); }

.success-text {
  position: absolute; top: 55%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 20px; color: #fff; letter-spacing: 4px;
  opacity: 0; transition: opacity 0.5s 0.3s;
}
.success-text.active { opacity: 1; }

/* å¤±è´¥ç•Œé¢ */
.fail-wrapper {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  opacity: 0; pointer-events: none; transition: 0.5s;
  z-index: 300; /* ç¡®ä¿æ˜¾ç¤ºåœ¨æœ€ä¸Šå±‚ */
}
.fail-wrapper.active { opacity: 1; pointer-events: auto; }
.fail-title { font-size: 24px; color: #FF3B30; font-weight: bold; margin-bottom: 20px; }
.fail-desc { font-size: 14px; color: #999; margin-bottom: 40px; }

.finish-btn {
  padding: 15px 50px; border: 1px solid #fff; border-radius: 30px;
  display: inline-block;
}
.finish-btn-wrapper {
  position: absolute; bottom: 100px; left: 50%;
  transform: translateX(-50%) translateY(20px);
  opacity: 0; pointer-events: none; transition: all 0.5s; z-index: 200;
}
.finish-btn-wrapper.active { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
.finish-btn text { font-size: 16px; letter-spacing: 2px; font-weight: bold; }