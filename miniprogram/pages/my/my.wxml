<view class="container">

  <!-- 1. é¡¶éƒ¨ä¸ªäººä¿¡æ¯ï¼šæ‚å¿—åŒ–æ’ç‰ˆï¼Œæ— æ¡†è®¾è®¡ -->

  <view class="profile-header">

    <view class="header-main">

      <view class="user-identity">

        <text class="rank-tag">PLATINUM MEMBER</text>

        <text class="user-name">Alexander</text>

      </view>

      <view class="add-btn" bindtap="openBindModal">+</view>

    </view>
    

    <view class="header-stats">

      <view class="stat-item">

        <text class="label">æ‹¥æœ‰äº§å“æ•°é‡</text>

        <text class="value">{{deviceList.length}} ä»¶</text>

      </view>

      <view class="divider-v"></view>

      <view class="stat-item">

        <text class="label">ä¼šå‘˜ç­‰çº§</text>

        <text class="value platinum">é“‚é‡‘å°Šäº«ä¼šå‘˜</text>

      </view>

    </view>

  </view>



  <!-- 2. åŠ¨æ€è®¢å•åŒºï¼šæ”¯æŒå¤šè®¢å•å·¦å³æ»‘åŠ¨ -->

  <view class="section-label">LIVE ORDERS / å®æ—¶è®¢å• {{orders.length > 1 ? (currentOrderIndex + 1) + '/' + orders.length : ''}}</view>

  <swiper class="order-swiper" bindchange="onOrderChange" previous-margin="40rpx" next-margin="40rpx">

    <swiper-item wx:for="{{orders}}" wx:key="id">

      <view class="order-card">

        <view class="order-index">{{index + 1 < 10 ? '0' + (index + 1) : index + 1}}</view>

        <view class="order-status {{item.state == 1 ? 'blue' : (item.state == 2 ? 'green' : '')}}">

          {{item.state == 0 ? 'å¾…å‘è´§' : (item.state == 1 ? 'è¿è¾“ä¸­' : 'å·²ç­¾æ”¶')}}

        </view>
        

        <view class="order-title">{{item.productName}}</view>
        

        <!-- å¾…å‘è´§æˆ–å·²ç­¾æ”¶å±•ç¤ºè®¢å•ä¿¡æ¯ -->

        <block wx:if="{{item.state == 0 || item.state == 2}}">

          <view class="info-line">

            <text>è®¢å•ç¼–å·</text>

            <text class="bold">{{item.orderId}}</text>

          </view>

          <view class="info-line" wx:if="{{item.state == 2}}">

            <text>å¿«é€’å•å·</text>

            <view class="copy-box" bindtap="copyData" data-text="{{item.shippingId}}">

              <text class="bold">{{item.shippingId}}</text>

              <text class="copy-tag">å¤åˆ¶</text>

            </view>

          </view>

          <view class="info-line">

            <text>{{item.state == 0 ? 'ä¸‹å•æ—¶é—´' : 'ç­¾æ”¶æ—¶é—´'}}</text>

            <text class="bold">{{item.time}}</text>

          </view>

          <view class="refund-btn" wx:if="{{item.state == 0}}" bindtap="requestRefund">ç”³è¯·å–æ¶ˆè®¢å•å¹¶é€€æ¬¾</view>

          <view class="logistics-detail-link" wx:if="{{item.state == 2}}" bindtap="viewLogistics">

            <text>æŸ¥çœ‹è¯¦ç»†ç‰©æµè¿½è¸ªè®°å½•</text>

            <text class="arrow">â”</text>

          </view>

        </block>



        <!-- è¿è¾“ä¸­å±•ç¤ºç‰©æµåŠ¨æ€ -->

        <block wx:if="{{item.state == 1}}">

          <view class="info-line">

            <text>å¿«é€’å•å·</text>

            <view class="copy-box" bindtap="copyData" data-text="{{item.shippingId}}">

              <text class="bold">{{item.shippingId}}</text>

              <text class="copy-tag">å¤åˆ¶</text>

            </view>

          </view>

          <view class="shipping-content">

            <view class="truck-icon">ğŸšš</view>

            <view class="ship-text">

              <text class="eta">é¢„è®¡æ˜å¤© 14:00 å‰é€è¾¾</text>

              <text class="desc">{{item.lastLogistics}}</text>

            </view>

          </view>

        </block>

      </view>

    </swiper-item>

  </swiper>



  <!-- 3. äº§å“è®¾å¤‡åˆ—è¡¨ -->

  <view class="section-label">MY DEVICES / äº§å“è®¾å¤‡</view>

  <view class="device-card" wx:for="{{deviceList}}" wx:key="sn">

    <view class="remove-icon" bindtap="removeDevice" data-index="{{index}}">âœ•</view>

    <view class="device-name">{{item.name}}</view>
    

    <view class="spec-list">

      <view class="spec-row">

        <text class="label">S/N åºåˆ—å·</text>

        <text class="value mono">{{item.sn}}</text>

      </view>

      <view class="spec-row">

        <text class="label">æ€»å‰©ä½™è´¨ä¿</text>

        <view class="warranty-val">

          <text class="days-num {{item.days < 30 ? 'warning' : ''}}">{{item.days}} Days</text>

          <text class="ext-tag" wx:if="{{item.hasExtra}}">å«å»¶ä¿</text>

        </view>

      </view>

      <view class="spec-row">

        <text class="label">è´¨ä¿åˆ°æœŸæ—¥æœŸ</text>

        <text class="value">{{item.expiryDate}}</text>

      </view>

      <view class="spec-row">

        <text class="label">æ¿€æ´»æ¬¡æ•°</text>

        <text class="value">{{item.activations}} æ¬¡</text>

      </view>

      <view class="spec-row">

        <text class="label">å›ºä»¶ç‰ˆæœ¬</text>

        <text class="value">{{item.firmware}}</text>

      </view>

    </view>

  </view>



  <!-- 4. åº•éƒ¨æœåŠ¡ -->

  <view class="footer-bar">

    <view class="f-btn">é¢„çº¦ç»´ä¿®æœåŠ¡</view>

    <view class="f-btn dark">è”ç³»åœ¨çº¿å®¢æœ</view>

  </view>



  <!-- 5. ç»‘å®šæ¨¡æ€æ¡† -->

  <view class="modal {{showModal ? 'show' : ''}}">

    <view class="modal-content">

      <view class="modal-header">

        <text>ç»‘å®šæ–°èµ„äº§</text>

        <view class="close-modal" bindtap="closeBindModal">âœ•</view>

      </view>



      <view class="bt-btn {{bluetoothReady ? 'ready' : ''}}" bindtap="startConnect">

        <text>{{bluetoothReady ? 'âœ… è“ç‰™è®¾å¤‡å·²è¿æ¥' : 'ğŸ“¡ ç‚¹å‡»è¿æ¥è“ç‰™è®¾å¤‡'}}</text>

      </view>



      <view class="form-item">

        <text class="form-label">é€‰æ‹©äº§å“å‹å·</text>

        <picker bindchange="onModelChange" range="{{modelOptions}}">

          <view class="picker-val">{{modelOptions[modelIndex] || 'è¯·é€‰æ‹©å‹å·'}}</view>

        </picker>

      </view>



      <view class="form-item">

        <text class="form-label">ä¸Šä¼ å‡­è¯ (äººå·¥å®¡æ ¸)</text>

        <view class="upload-group">

          <view class="upload-box"><text>+</text><text>è´­ä¹°æˆªå›¾</text></view>

          <view class="upload-box"><text>+</text><text>èŠå¤©è®°å½•</text></view>

        </view>

      </view>



      <view class="form-item">

        <text class="form-label">è´­ä¹°æ—¥æœŸ</text>

        <picker mode="date" bindchange="onDateChange">

          <view class="picker-val">{{buyDate || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>

        </picker>

      </view>



      <button class="submit-btn">æäº¤ä¸Šä¼ å®¡æ ¸</button>

    </view>

  </view>

</view>


