/* ================================================================= */
/* scan.wxss - æœ€ç»ˆä¿®å¤ç‰ˆ (èƒ¶å›ŠåµŒå…¥å¡ç‰‡) */
/* ================================================================= */

/* --- 1. å…¨å±€åŸºç¡€ --- */
page {
  background-color: #eef1f5;
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  overflow: hidden;
}
.container { width: 100%; height: 100%; position: relative; }

/* é¡¶éƒ¨å¯¼èˆª */
.header {
  position: fixed; top: 0; left: 0; right: 0; height: 180rpx;
  padding-top: 80rpx; padding-left: 40rpx; padding-right: 40rpx;
  box-sizing: border-box; display: flex; justify-content: space-between; align-items: center;
  z-index: 10000; pointer-events: none;
  background: transparent; 
}
.back-icon {
  width: 70rpx;
  height: 70rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  transition: all 0.2s;
  font-size: 52rpx;
  font-weight: 300;
  color: #000;
  line-height: 1;
}
.back-icon:active {
  transform: scale(0.95);
  opacity: 0.7;
}
.back-icon::before {
  display: none;
}
.nav-logo {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-size: 34rpx;
  font-weight: 800;
  letter-spacing: 4rpx;
  color: #1c1c1e;
}

/* ================================================================= */
/* 2. ä¸»å¡ç‰‡å®¹å™¨ (Integrated Card) - çˆ¶å®¹å™¨ */
/* ================================================================= */
.integrated-card {
  /* è·ç¦»å±å¹•é¡¶éƒ¨çš„ä½ç½® */
  margin-top: 300rpx;
  
  /* å°ºå¯¸ */
  width: 670rpx;
  height: auto;
  min-height: 70vh;
  
  /* å¤–è§‚ */
  background: #FFFFFF;
  border-radius: 60rpx;
  box-shadow: 0 40rpx 80rpx rgba(0,0,0,0.06);
  
  /* å¸ƒå±€æ ¸å¿ƒï¼šç›¸å¯¹å®šä½ï¼ŒFlex çºµå‘æ’åˆ— */
  position: relative; 
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: visible; /* å…è®¸é˜´å½±æˆ–æç¤ºæ¡†æº¢å‡º */
  
  padding-bottom: 60rpx;
  z-index: 10;
}

/* ========================================= */
/* 2. èƒ¶å›Šå®¹å™¨ (æ§åˆ¶ä½ç½®ä¸è·³åŠ¨åŠ¨ç”») */
/* ========================================= */
.top-capsule-wrap {
  position: relative !important;
  top: auto !important;
  left: auto !important;
  
  width: 100%;
  height: 110rpx;
  display: flex;
  justify-content: center;
  z-index: 100;
  
  /* é»˜è®¤çŠ¶æ€ï¼šç¨å¾®æœ‰ä¸€ç‚¹è·ç¦» (ä¾‹å¦‚ 20rpx)ï¼Œè¥é€ æ‚¬æµ®æ„Ÿ */
  margin-top: 50rpx; 
  
  /* æ·»åŠ è¿‡æ¸¡åŠ¨ç”»ï¼Œè®©è·³åŠ¨æ›´å¹³æ»‘ */
  transition: margin-top 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

/* çŠ¶æ€ï¼šè¿æ¥æˆåŠŸå */
/* èƒ¶å›Šå®¹å™¨å‘ä¸Šç§»åŠ¨ï¼Œç´§è´´å¡ç‰‡é¡¶éƒ¨ */
.top-capsule-wrap.connected-wrapper {
  margin-top: 0rpx !important;
}

.smart-capsule {
  pointer-events: auto;
  height: 110rpx;
  border-radius: 55rpx;
  box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.1);
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  
  /* é»˜è®¤é»‘è‰²èƒŒæ™¯ */
  background: #1C1C1E; 
  width: 320rpx; /* é»˜è®¤å®½åº¦ */
  
  transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

/* çŠ¶æ€ï¼šæ‰«æä¸­ (å˜å®½) */
.smart-capsule.scanning {
  width: 380rpx;
}

/* çŠ¶æ€ï¼šå·²è¿æ¥ (å˜å®½ï¼Œå˜æµ…ç°/ç™½) */
.smart-capsule.connected {
  width: 660rpx; /* æ’‘æ»¡å¡ç‰‡å®½åº¦ï¼Œç•™ä¸€ç‚¹è¾¹è· */
  background: #F5F5F7; /* æµ…ç°è‰²ï¼Œä¸ç™½è‰²èƒŒæ™¯åŒºåˆ† */
}

/* --- èƒ¶å›Šå†…éƒ¨å†…å®¹ --- */
.capsule-content {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  animation: fadeIn 0.3s ease-out;
}

/* A. å¾…æœº */
.idle { gap: 16rpx; }
.idle-icon-img { width: 40rpx; height: 40rpx; animation: breathe 3s infinite ease-in-out; }
.idle text { color: #FFF; font-size: 30rpx; font-weight: 600; letter-spacing: 2rpx; }

/* B. æ‰«æ */
.scanning-ui { gap: 24rpx; }
.scanning-ui text { color: #CCC; font-size: 28rpx; font-weight: 600; letter-spacing: 2rpx; }

/* C. æ­£åœ¨è¿æ¥ (ç™½è‰²å­—) */
.connecting-ui { gap: 24rpx; }

/* è¿æ¥ä¸­æ–‡å­—é¢œè‰² (å¼ºåˆ¶ç™½è‰²) */
.connecting-ui text {
  color: #FFFFFF !important;
  font-size: 28rpx; 
  font-weight: 600; 
  letter-spacing: 2rpx;
}

/* D. å·²è¿æ¥ */
.connected-ui { justify-content: space-between; padding: 0 20rpx 0 40rpx; box-sizing: border-box; }
.status-left { display: flex; align-items: center; gap: 20rpx; flex: 1; }
.device-name { font-size: 30rpx; font-weight: 800; color: #1c1c1e; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* æ‰«æåŠ¨ç”»åœˆ */
.scan-loader { position: relative; width: 30rpx; height: 30rpx; display: flex; align-items: center; justify-content: center; }
.wave { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 4rpx solid #FFF; opacity: 0; animation: waveAnim 1.5s infinite ease-out; }
.wave.delay { animation-delay: 0.6s; }
.blue-loader .wave { border-color: #0A84FF; } /* è“è‰²æ³¢çº¹ */

/* ========================================= */
/* ä¿®å¤ï¼šä¿¡å·æ¡åŠ¨ç”» (å¼ºåˆ¶å¼€å¯) */
/* ========================================= */

/* 1. é€‰ä¸­ä¿¡å·ç»„é‡Œçš„ barï¼Œèµ‹äºˆåŠ¨ç”» */
.signal-group .bar {
  width: 8rpx;
  background: #34C759; /* ç»¿è‰² */
  border-radius: 4rpx;
  /* å…³é”®ï¼šå®šä¹‰åŠ¨ç”»å signalLoop */
  animation: signalLoop 1s infinite ease-in-out !important; 
  transform-origin: bottom; /* è®©å®ƒä»åº•éƒ¨å‘ä¸Šä¼¸ç¼© */
}

/* 2. è®¾ç½®ä¸‰æ ¹æŸ±å­çš„é«˜åº¦å’Œå»¶è¿Ÿï¼Œå½¢æˆæ³¢æµªæ„Ÿ */
.signal-group .bar:nth-child(1) {
  height: 14rpx;
  animation-delay: 0s;
}

.signal-group .bar:nth-child(2) {
  height: 22rpx;
  animation-delay: 0.2s; /* é”™å¼€æ—¶é—´ */
}

.signal-group .bar:nth-child(3) {
  height: 30rpx;
  animation-delay: 0.4s; /* é”™å¼€æ—¶é—´ */
}

/* 3. å®šä¹‰åŠ¨ç”»å…³é”®å¸§ (ä¼¸ç¼© + é€æ˜åº¦) */
@keyframes signalLoop {
  0%, 100% {
    transform: scaleY(1);
    opacity: 1;
  }
  50% {
    transform: scaleY(0.5); /* ç¼©çŸ­ä¸€åŠ */
    opacity: 0.5;           /* å˜æ·¡ */
  }
}

/* ä¿¡å·æ¡å®¹å™¨ */
.signal-group { display: flex; align-items: flex-end; gap: 6rpx; height: 30rpx; }

/* æ–­å¼€æŒ‰é’® */
.disconnect-btn { 
  width: 90rpx; height: 90rpx; background: #E5E5EA; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; transition: background 0.2s;
}
.disconnect-btn:active { background: #D1D1D6; }
.close-x { position: relative; width: 26rpx; height: 26rpx; }
.close-x::before, .close-x::after {
  content: ''; position: absolute; top: 10rpx; left: 0; width: 100%; height: 6rpx;
  background: #FF3B30; border-radius: 2rpx; transform: rotate(45deg);
}
.close-x::after { transform: rotate(-45deg); }

/* ========================================= */
/* 3. æç¤ºæ¡†ä½ç½® (Toast ç»Ÿä¸€ç®¡ç†) */
/* ========================================= */
.toast-container {
  position: absolute;
  /* ä½ç½®å›ºå®šï¼šèƒ¶å›Šé«˜åº¦110 + åˆå§‹margin 20 + é—´è·20 = 150å·¦å³ */
  /* è¿™é‡Œè®¾ç½®ä¸€ä¸ªå›ºå®šå€¼ï¼Œç¡®ä¿ä¸¤ä¸ªå¼¹çª—å‡ºç°çš„ä½ç½®å®Œå…¨ä¸€æ · */
  top: 200rpx; 
  left: 0; width: 100%;
  display: flex; flex-direction: column; align-items: center; gap: 20rpx;
  pointer-events: none; 
  z-index: 90;
}

.toast {
  background: rgba(255, 255, 255, 0.95); /* ç¨å¾®ä¸é€æ˜ä¸€ç‚¹ï¼Œæ›´æ¸…æ™° */
  backdrop-filter: blur(12rpx);
  padding: 24rpx 48rpx;
  border-radius: 50rpx;
  display: flex; align-items: center; gap: 20rpx;
  box-shadow: 0 20rpx 60rpx rgba(0,0,0,0.12);
  
  /* é»˜è®¤éšè—çŠ¶æ€ */
  opacity: 0; 
  transform: translateY(-20rpx) scale(0.95);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* ç¡®ä¿ä¸å ä½ (å¦‚æœä¸¤ä¸ªåŒæ—¶å­˜åœ¨ï¼Œè™½ç„¶é€»è¾‘ä¸Šäº’æ–¥) */
  position: absolute; 
}

.toast.show {
  opacity: 1; 
  transform: translateY(0) scale(1);
  position: relative; /* æ˜¾ç¤ºæ—¶å æ®æµï¼Œæˆ–è€…ä¿æŒabsoluteçœ‹é‡å æ•ˆæœï¼Œè¿™é‡Œå»ºè®®relativeè®©å®¹å™¨æ’‘å¼€ */
}

.toast text { color: #1D1D1F; font-size: 28rpx; font-weight: 600; letter-spacing: 1rpx; }

.t-icon {
  width: 40rpx; height: 40rpx; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 24rpx; font-weight: 900; color: #fff;
}
/* å›¾æ ‡é¢œè‰² */
.t-icon.warn { background: #FF9500; } /* æ©™è‰² ! */
.t-icon.err { background: #FF3B30; }  /* çº¢è‰² ! */

/* ================================================================= */
/* 5. å¡ç‰‡å†…éƒ¨è§†è§‰ä¸æ§åˆ¶åŒº */
/* ================================================================= */
.card-visual {
  flex: 1; width: 100%;
  display: flex; align-items: center; justify-content: center;
  background: #FFFFFF; position: relative;
}
.card-device-img {
  width: 420rpx; height: auto; 
  filter: drop-shadow(0 20rpx 40rpx rgba(0,0,0,0.05));
}

.card-controls {
  width: 100%; padding: 0 40rpx; box-sizing: border-box;
  margin-top: auto; margin-bottom: 20rpx;
  display: flex;
  flex-direction: column;
  align-items: center; /* ğŸ”´ ç¡®ä¿æŒ‰é’®ç»„åœ¨å®¹å™¨ä¸­å±…ä¸­ */
}

.split-btn-group {
  width: 100%; height: 150rpx;
  background: #FFFFFF;
  box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.05); 
  border: 1px solid rgba(0,0,0,0.02);
  border-radius: 40rpx;
  display: flex; 
  align-items: center;
  /* flex: 1 å·²ç»ç¡®ä¿ä¸‰ä¸ªæŒ‰é’®å¹³å‡åˆ†é…ï¼Œä¸éœ€è¦ justify-content */
  margin-bottom: 30rpx;
}
.split-item {
  flex: 1; height: 100%;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 16rpx; transition: transform 0.1s;
}
.split-item:active { transform: scale(0.98); background: #FAFAFA; border-radius: 40rpx; }

/* ğŸ”´ è°ƒæ•´æŒ‰é’®æ»‘åŠ¨ç›¸å…³æ ·å¼ */
.adjust-slider-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: visible; /* å…è®¸æ»‘åŠ¨æ—¶è¶…å‡ºå®¹å™¨ */
}

/* åº•å±‚ï¼šå½’é›¶æŒ‰é’®ï¼ˆæ»‘åŠ¨åæ˜¾ç¤ºï¼‰ */
.zero-btn-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 1;
  background: transparent;
}

.zero-btn-layer.show {
  opacity: 1;
  pointer-events: auto;
}

/* é¡¶å±‚ï¼šè°ƒæ•´æŒ‰é’®ï¼ˆå¯å‘ä¸Šæ»‘åŠ¨ï¼‰ */
.adjust-slider-btn {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  z-index: 2;
  /* ğŸ”´ å…³é”®ï¼šæ»‘åŠ¨æ—¶ç¦ç”¨è¿‡æ¸¡ï¼Œè·Ÿæ‰‹ï¼›æ»‘åŠ¨ç»“æŸåå¯ç”¨è¿‡æ¸¡ï¼Œå›å¼¹ */
  transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1);
  touch-action: pan-y; /* å…è®¸å‚ç›´æ»‘åŠ¨ */
  will-change: transform; /* æ€§èƒ½ä¼˜åŒ– */
}

/* æ»‘åŠ¨ä¸­ç¦ç”¨è¿‡æ¸¡ï¼ˆé€šè¿‡ JS åŠ¨æ€æ§åˆ¶ï¼‰ */
.adjust-slider-btn.sliding {
  transition: none;
}

.btn-text { font-size: 28rpx; font-weight: 600; color: #1D1D1D; }
.btn-divider { width: 2rpx; height: 60rpx; background: #EEE; }
.btn-icon-circle { width: 50rpx; height: 50rpx; display: flex; align-items: center; justify-content: center; }
.svg-icon { width: 44rpx; height: 44rpx; opacity: 0.9; }

/* ================================================================= */
/* 6. å…¶ä»–ç•Œé¢ (åˆ—è¡¨ã€è¯¦æƒ…ã€å¼¹çª—) - ä¿æŒåŸæ · */
/* ================================================================= */
.gallery-container {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  perspective: 1000px; z-index: 10;
  transition: opacity 0.4s, transform 0.4s; pointer-events: auto;
}
.gallery-container.fade-out { opacity: 0; pointer-events: none; transform: scale(0.9); z-index: 0; }

.card {
  position: absolute; width: 620rpx; height: 1000rpx;
  background: #FFFFFF; border-radius: 60rpx; padding: 60rpx 50rpx;
  display: flex; flex-direction: column; justify-content: space-between;
  box-shadow: 0 30rpx 80rpx rgba(0,0,0,0.08);
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  opacity: 0; transform: scale(0.85); z-index: 1; box-sizing: border-box;
}
.card.active { opacity: 1; z-index: 100; transform: translateX(0) scale(1); }
.card.next { opacity: 0.6; z-index: 5; transform: translateX(85%) scale(0.85); }
.card.prev { opacity: 0.6; z-index: 5; transform: translateX(-85%) scale(0.85); }
.card.hidden { opacity: 0; pointer-events: none; transform: scale(0.8); }

.card-header { text-align: left; }
.series-tag { font-size: 20rpx; font-weight: 700; color: #999; letter-spacing: 2rpx; border: 1px solid #eee; padding: 6rpx 12rpx; border-radius: 10rpx; display: inline-block; margin-bottom: 10rpx; }
.model-name { font-size: 64rpx; font-weight: 900; color: #1c1c1e; line-height: 1; }
.model-suffix { color: #007AFF; }
.model-suffix.max { color: #FF3B30; }
.model-suffix.pro-long { color: #007AFF; }
.model-suffix.max-long { color: #FF3B30; }
.visual-area { flex: 1; display: flex; align-items: center; justify-content: center; }
.custom-icon { width: 400rpx; height: 300rpx; filter: drop-shadow(0 20rpx 40rpx rgba(0,0,0,0.1)); }
.action-btn {
  width: 100%; height: 100rpx; background: #1c1c1e; color: #fff;
  border-radius: 50rpx; display: flex; align-items: center; justify-content: center;
  font-weight: 600; font-size: 28rpx; position: relative; z-index: 9999; 
  transition: transform 0.1s;
}
.action-btn:active { transform: scale(0.95); background: #333; }
.swipe-hint { position: absolute; bottom: 60rpx; width: 100%; text-align: center; font-size: 24rpx; color: #aaa; letter-spacing: 2rpx; pointer-events: none; }

.control-page {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background: #eef1f5; display: flex; flex-direction: column; align-items: center;
  opacity: 0; visibility: hidden; z-index: 0; pointer-events: none;
  transform: translateY(50rpx); transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
}
.control-page.show { opacity: 1; visibility: visible; z-index: 50; pointer-events: auto; transform: translateY(0); }
.device-stage { flex: 1; width: 100%; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 100rpx; }

.view-layer { 
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
  display: flex; flex-direction: column; align-items: center; justify-content: center; 
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1); 
  opacity: 0; pointer-events: none; z-index: 50; transform: scale(0.95); 
}
.view-layer.active { opacity: 1; pointer-events: auto; transform: scale(1); }

/* ç¼–è¾‘é¡µç›¸å…³ */
.top-presets-row {
  height: 160rpx; width: 100%; display: flex; justify-content: space-between; align-items: flex-end; 
  padding: 0 60rpx 20rpx 60rpx; box-sizing: border-box; flex-shrink: 0;
}
.preset-btn {
  width: 160rpx; height: 90rpx; background: #F2F3F5; border-radius: 45rpx;
  display: flex; align-items: center; justify-content: center;
  font-size: 32rpx; font-weight: 700; color: #999; transition: all 0.2s;
}
.preset-btn:active { transform: scale(0.95); }
.preset-btn.active { background: #1C1C1E; color: #FFFFFF; box-shadow: 0 10rpx 25rpx rgba(0,0,0,0.15); }

.value-info-row {
  height: auto; padding-bottom: 20rpx; width: 100%; 
  display: flex; flex-direction: column; align-items: center; justify-content: center; flex-shrink: 0;
}
.val-big-text { font-size: 100rpx; font-weight: 900; color: #1D1D1F; line-height: 1; }
.val-status-text { font-size: 26rpx; color: #34C759; font-weight: 700; margin-top: 10rpx; }
.val-status-text.waiting { color: #FF3B30 !important; }
.val-status-text.success { color: #34C759 !important; }

/* æ£å­ */
.stick-visual-stage {
  flex: 1; width: 100%; position: relative;
  display: flex; align-items: center; justify-content: center; padding: 0; 
}
.stick-hinge-wrapper { position: relative; width: 300rpx; height: 300rpx; display: flex; align-items: center; justify-content: center; }
.stick-common { position: absolute; width: 16rpx; height: 160rpx; background: #1C1C1E; border-radius: 8rpx; }
.stick-fixed { top: 50%; left: 50%; transform: translate(-50%, calc(-100% + 8rpx)); z-index: 2; }
.stick-rotating { top: 50%; left: 50%; transform-origin: 50% 8rpx; margin-left: -8rpx; transition: transform 0.1s linear; z-index: 1; }

/* æ‰“å¼€è§’åº¦é¡µé¢ï¼šæŒ‡ç¤ºç¯æŒ‰é’® */
.light-button-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40rpx 0;
  flex-shrink: 0;
}
.light-button-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.1s;
}
.light-button-wrapper:active {
  transform: scale(0.95);
}
.light-button-text {
  margin-top: 30rpx;
  font-size: 28rpx;
  font-weight: 600;
  color: #666;
  text-align: center;
}

/* æŠ˜å ç¼–è¾‘è§†è§‰ */
.fold-visual-box { width: 100%; height: 400rpx; display: flex; align-items: center; justify-content: center; gap: 0; }
.stick-simple { width: 16rpx; height: 160rpx; background: #1C1C1E; border-radius: 8rpx; transition: margin 0.3s cubic-bezier(0.25, 1, 0.5, 1); }

/* åº•éƒ¨æŒ‰é’®åŒº */
.footer-btn-area {
  width: 100%; height: 140rpx; display: flex; align-items: center; justify-content: center; margin-top: 20rpx; padding-bottom: 0;
}
.btn-finish-pill {
  width: 500rpx; height: 100rpx; background: #1D1D1F; color: #fff;
  border-radius: 50rpx; display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 32rpx; box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.2); margin: 0 auto;
}

/* æ³¢è½® */
.ruler-wave-area {
  height: 140rpx; width: 100%; position: relative; overflow: hidden; margin-bottom: 40rpx; flex-shrink: 0; touch-action: pan-x;
}
.wave-track {
  height: 100%; display: flex; align-items: center; padding-left: calc(50% - 3px); padding-right: 50%; will-change: transform;
}
.wave-track .bar { animation: none !important; }
.bar {
  flex-shrink: 0; width: 6px; height: 16rpx; background: #E5E5EA; border-radius: 6rpx; margin-right: 14px; 
  transition: height 0.1s ease-out, background-color 0.1s ease-out;
}
.bar.active { height: 90rpx; background: #1D1D1F; }
.bar.near-1 { height: 50rpx; background: #8E8E93; }
.bar.near-2 { height: 30rpx; background: #C7C7CC; }
.mask-fade { position: absolute; top: 0; bottom: 0; width: 120rpx; z-index: 5; pointer-events: none; }
.mask-fade.left { left: 0; background: linear-gradient(to right, #fff, transparent); }
.mask-fade.right { right: 0; background: linear-gradient(to left, #fff, transparent); }

/* å¼¹çª—é€šç”¨ (å¯†ç æç¤º) */
.password-modal-mask {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); z-index: 9999;
  display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s ease;
}
.password-box {
  width: 580rpx; background: #FFFFFF; border-radius: 50rpx; padding: 50rpx 40rpx;
  display: flex; flex-direction: column; align-items: center; box-shadow: 0 40rpx 80rpx rgba(0,0,0,0.2);
  transform: scale(0.9); animation: popUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}
.bluetooth-icon-wrap {
  width: 120rpx; 
  height: 120rpx; 
  background: #E5E5EA; /* é»˜è®¤ç°è‰² */
  border-radius: 50%;
  display: flex; 
  align-items: center; 
  justify-content: center; 
  margin-bottom: 30rpx;
  animation: bounceIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  transition: all 0.2s ease;
  cursor: pointer;
}

/* è“ç‰™å›¾æ ‡ç‚¹å‡»ä¸­çŠ¶æ€ï¼ˆæ¨¡æ‹Ÿç‚¹å‡»æ•ˆæœï¼šç¼©å°+é˜´å½±ï¼‰ */
.bluetooth-icon-wrap.icon-clicking {
  background: #D1D1D6; /* ç‚¹å‡»æ—¶ç¨å¾®å˜æ·±ä¸€ç‚¹ */
  transform: scale(0.95);
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.2);
}

/* è“ç‰™å›¾æ ‡æ¿€æ´»çŠ¶æ€ï¼ˆæ·±è“è‰²ï¼‰ */
.bluetooth-icon-wrap.icon-active {
  background: #0051D5 !important; /* æ·±è“è‰² */
  transform: scale(1);
  box-shadow: 0 0 20rpx rgba(0, 81, 213, 0.4);
}

.bluetooth-icon-wrap.icon-active .bt-icon-img {
  filter: brightness(1.2);
}

.bt-icon-img { 
  width: 50rpx; 
  height: 50rpx; 
  transition: filter 0.3s ease;
}

/* ğŸ”´ æ ¡å‡†ä¸­å›¾æ ‡æ ·å¼ */
.calibrating-icon-wrap {
  width: 120rpx; 
  height: 120rpx; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  margin-bottom: 30rpx;
}

.calibrating-spinner {
  width: 80rpx;
  height: 80rpx;
  border: 6rpx solid #E5E5EA;
  border-top-color: #1C1C1E;
  border-radius: 50%;
  animation: calibratingRotate 1s linear infinite;
}

@keyframes calibratingRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.pass-title { font-size: 36rpx; font-weight: 800; color: #1c1c1e; margin-bottom: 30rpx; }
.pass-desc { font-size: 26rpx; color: #888; margin-bottom: 40rpx; text-align: center; line-height: 1.6; white-space: pre-wrap; }
.pass-input {
  width: 100%; height: 100rpx; background: #F5F5F7; border-radius: 25rpx;
  text-align: center; font-size: 40rpx; letter-spacing: 12rpx; font-weight: 800;
  margin-bottom: 40rpx; box-sizing: border-box; color: #1c1c1e;
}
.pass-btns { width: 100%; display: flex; gap: 30rpx; }
.p-btn {
  flex: 1; height: 100rpx; border-radius: 50rpx;
  display: flex; align-items: center; justify-content: center;
  font-size: 30rpx; font-weight: 700; transition: opacity 0.2s;
}
.p-btn:active { transform: scale(0.97); }
.p-btn.cancel { background: #F5F5F7; color: #8E8E93; }
.p-btn.confirm { background: #1C1C1E; color: #FFFFFF; box-shadow: 0 10rpx 30rpx rgba(28, 28, 30, 0.3); }
.p-btn.full-width { flex: 1; width: 100%; }

/* å¼•å¯¼å¼¹çª— (Tutorial & Key Anim) */
.anim-stage { width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 50rpx; }
.ring-btn-wrapper { position: relative; width: 160rpx; height: 160rpx; display: flex; align-items: center; justify-content: center; transition: transform 0.2s; }
.ring-btn-wrapper.pressing { transform: scale(0.9); }
.ring-outer {
  width: 140rpx; height: 140rpx; border-radius: 50%; border: 4rpx solid #1C1C1E; 
  background-color: transparent; position: relative;
  display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease;
}
.ring-outer.light-on { background-color: #FF3B30; }
.ring-inner { width: 110rpx; height: 110rpx; border-radius: 50%; border: 4rpx solid #1C1C1E; background-color: #FFFFFF; z-index: 2; }
.sim-finger-tap { position: absolute; width: 100%; height: 100%; border-radius: 50%; background: rgba(0,0,0,0.1); animation: ripple 0.3s linear; z-index: 1; }
.anim-desc { margin-top: 40rpx; font-size: 32rpx; font-weight: 700; color: #1c1c1e; text-align: center; line-height: 1.5; height: 90rpx; display: flex; align-items: center; justify-content: center; white-space: pre-wrap; }

/* é’¥åŒ™åŠ¨ç”» */
.key-circle {
  width: 140rpx; height: 140rpx; border-radius: 50%; border: 6rpx solid #1C1C1E;
  display: flex; align-items: center; justify-content: center; position: relative; transition: border-color 0.5s ease;
}
.key-circle.key-grey { border-color: #CCC; }
.key-bar { width: 12rpx; height: 70rpx; background-color: #FF3B30; border-radius: 6rpx; transform-origin: center center; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
.key-bar.turn-left { transform: rotate(-90deg); background-color: #CCC; }

/* ç‹¬ç«‹å¼•å¯¼å¼¹çª— (Tutorial Mask) */
.tutorial-mask {
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); z-index: 10000;
  display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s ease; pointer-events: auto;
}
.guide-modal {
  width: 500rpx; background: #FFFFFF; border-radius: 40rpx; padding: 60rpx 50rpx;
  display: flex; flex-direction: column; align-items: center;
  box-shadow: 0 30rpx 80rpx rgba(0,0,0,0.4); animation: popUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  pointer-events: auto !important; z-index: 2002 !important;
}
.guide-title { font-size: 36rpx; font-weight: 800; color: #1D1D1F; margin-bottom: 20rpx; }
.guide-close-btn {
  width: 100%; height: 90rpx; background: #1D1D1F; color: #fff; border-radius: 45rpx;
  display: flex; align-items: center; justify-content: center; font-size: 30rpx; font-weight: 700;
  pointer-events: auto !important; z-index: 3000 !important; position: relative;
}
.guide-close-btn:active { transform: scale(0.96); }

/* é«˜çº§è®¾ç½®å¼¹çª— */
.modal-mask-new {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.3); backdrop-filter: blur(12px); z-index: 2000;
  opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
  display: flex; align-items: flex-end; justify-content: center;
}
.modal-mask-new.show { opacity: 1; pointer-events: auto; }
.modal-body-new {
  width: 100%; background: #fff; border-radius: 44rpx 44rpx 0 0;
  padding: 40rpx 30rpx 80rpx 30rpx; box-sizing: border-box;
  transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
}
.modal-mask-new.show .modal-body-new { transform: translateY(0); }
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40rpx; }
.m-title { font-size: 34rpx; font-weight: 800; color: #1D1D1F; letter-spacing: -0.5px; }
.m-close { width: 60rpx; height: 60rpx; background: #F2F4F7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24rpx; color: #86868B; transition: 0.2s; }
.ui-toast {
  position: absolute; top: -100rpx; left: 50%; transform: translateX(-50%) translateY(20rpx);
  background: rgba(29, 29, 31, 0.95); color: white;
  padding: 16rpx 32rpx; border-radius: 40rpx;
  font-size: 26rpx; font-weight: 600; box-shadow: 0 10rpx 30rpx rgba(0,0,0,0.15);
  opacity: 0; pointer-events: none; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  white-space: nowrap; z-index: 2100;
}
.ui-toast.pop { opacity: 1; transform: translateX(-50%) translateY(0); }
.setting-row { margin-bottom: 40rpx; }
.row-info { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 16rpx; padding: 0 6rpx; }
.label-main { font-size: 30rpx; font-weight: 700; color: #1D1D1F; }
.label-sub { font-size: 22rpx; font-weight: 600; color: #86868B; letter-spacing: 1rpx; text-transform: uppercase; }
.mag-track {
  width: 100%; height: 100rpx; background: #F0F0F2; border-radius: 30rpx;
  position: relative; padding: 8rpx; box-sizing: border-box;
  display: flex; justify-content: space-between; align-items: center;
}
.click-pad { position: absolute; top: 0; bottom: 0; width: 50%; z-index: 50; }
.click-pad.left { left: 0; }
.click-pad.right { right: 0; }
.mag-thumb {
  position: absolute; top: 8rpx; bottom: 8rpx;
  background: #1D1D1F; border-radius: 24rpx;
  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.15); z-index: 10;
  transition: left 0.3s cubic-bezier(0.25, 1, 0.5, 1), width 0.3s;
  left: 50%; width: 60rpx; transform: translateX(-50%) scaleY(0.3); opacity: 0.2;
}
.mag-track[data-state="left"] .mag-thumb { left: 8rpx; width: calc(50% - 12rpx); transform: none; opacity: 1; }
.mag-track[data-state="right"] .mag-thumb { left: calc(50% + 4rpx); width: calc(50% - 12rpx); transform: none; opacity: 1; }
.track-labels {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  display: flex; justify-content: space-between; align-items: center;
  padding: 0 40rpx; box-sizing: border-box; pointer-events: none; z-index: 20;
}
.t-txt { font-size: 26rpx; font-weight: 600; color: #86868B; transition: color 0.3s delay 0.1s; }
.mag-track[data-state="left"] .t-txt.l { color: #fff; }
.mag-track[data-state="right"] .t-txt.r { color: #fff; }

/* åŠ¨ç”»å…³é”®å¸§å®šä¹‰ */
@keyframes bounceIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes signalBounce { 0%, 100% { opacity: 1; transform: scaleY(1); } 50% { opacity: 0.5; transform: scaleY(0.7); } }

/* ========================================= */
/* é˜²è¯¯è§¦é”å®šæ ·å¼ */
/* ========================================= */
/* å½“æŒ‰é’®è¢«é”å®šæ—¶ï¼Œé€æ˜åº¦é™ä½ï¼Œä¸”è¿‡æ¸¡å¹³æ»‘ */
.btn-locked {
  opacity: 0.3 !important; /* å˜æš— */
  transition: opacity 0.3s ease-out; /* å¹³æ»‘è¿‡æ¸¡ */
  pointer-events: none; /* ç‰©ç†ç¦æ­¢ç‚¹å‡» (åŒä¿é™©) */
}

/* ========================================= */
/* æœ€ç»ˆç‰ˆï¼šä»ä¸­é—´å¾€å·¦æ»‘åŠ¨ & æ¸…ç†å†—ä½™ä»£ç  */
/* ========================================= */

.gesture-anim-box {
  width: 100%;
  height: 180rpx;
  background: #F5F5F7;
  border-radius: 20rpx;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 50rpx;
  overflow: hidden;
}

/* 1. æ³¢è½®å¯è§†åŒºåŸŸ (Mask) */
.anim-track-mask {
  width: 100%; /* æ’‘æ»¡å®¹å™¨ */
  height: 100%;
  overflow: hidden;
  position: relative;
  /* ä¸¤ä¾§æ¸å˜é®ç½©ï¼Œè¥é€ æ»šåŠ¨æ„Ÿ */
  mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 15%, black 85%, transparent);
  
  display: flex;
  align-items: center;
  justify-content: center; /* è®©å†…éƒ¨çš„å†…å®¹å±…ä¸­ */
}

/* 2. æ³¢è½®ç§»åŠ¨å±‚ (Slider) */
.track-slider {
  display: flex;
  align-items: center;
  gap: 24rpx; /* åˆ»åº¦é—´è· */
  
  /* åˆå§‹ä½ç½®ï¼šç»å¯¹å±…ä¸­ */
  /* æˆ‘ä»¬ä¸éœ€è¦ position absoluteï¼Œflex å·²ç»å±…ä¸­äº†ï¼Œç›´æ¥ç”¨ transform åšåŠ¨ç”» */
  
  /* ç»‘å®šåŠ¨ç”»ï¼šå‘å·¦ç§»åŠ¨ */
  animation: trackScrollLeft 1.8s infinite cubic-bezier(0.25, 1, 0.5, 1);
}

.track-tick {
  width: 6rpx;
  height: 30rpx;
  background: #1C1C1E;
  border-radius: 4rpx;
  flex-shrink: 0;
}

/* 3. æ‰‹æŒ‡å®¹å™¨ */
.anim-finger {
  position: absolute;
  top: 50%;
  left: 50%; /* ç»å¯¹å±…ä¸­ */
  
  /* ç»‘å®šåŠ¨ç”»ï¼šæ‰‹æŒ‡ä¹Ÿå‘å·¦ */
  animation: fingerSwipeLeft 1.8s infinite cubic-bezier(0.25, 1, 0.5, 1);
  pointer-events: none;
  z-index: 10;
}

/* æ‰‹æŒ‡æœ¬ä½“æ ·å¼ */
.finger-dot {
  width: 80rpx;
  height: 80rpx;
  background: rgba(0, 122, 255, 0.15);
  border-radius: 50%;
  border: 4rpx solid #007AFF;
  position: relative;
  box-shadow: 0 10rpx 20rpx rgba(0, 122, 255, 0.2);
}
.finger-dot::after {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 24rpx; height: 24rpx;
  background: #007AFF;
  transform: translate(-50%, -50%);
  border-radius: 50%;
}

/* ================== å…³é”®å¸§åŠ¨ç”» (ä¸­é—´ -> å·¦è¾¹) ================== */

/* A. æ³¢è½®åˆ»åº¦ï¼šå‘å³ç§»åŠ¨ */
@keyframes trackScrollLeft {
  0% {
    transform: translateX(-60rpx); /* èµ·å§‹ï¼šç¨å¾®åå·¦ä¸€ç‚¹ */
  }
  20% {
    transform: translateX(-60rpx); 
  }
  100% {
    transform: translateX(120rpx); /* å‘å³ç§»åŠ¨ */
  }
}

/* B. æ‰‹æŒ‡ï¼šä¸­é—´ -> å³è¾¹ */
@keyframes fingerSwipeLeft {
  0% {
    transform: translate(calc(-50% - 60rpx), -50%); /* èµ·å§‹ï¼šç¨å¾®åå·¦ */
    opacity: 0;
  }
  20% {
    opacity: 1; /* æ˜¾ç° */
  }
  80% {
    opacity: 1;
    transform: translate(calc(-50% + 120rpx), -50%); /* ç»“æŸï¼šå³è¾¹ */
  }
  100% {
    transform: translate(calc(-50% + 120rpx), -50%);
    opacity: 0; /* æ¶ˆå¤± */
  }
}

/* ========================================= */
/* å¼¹çª—åŠ¨ç”»å®šä¹‰ */
/* ========================================= */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes popUp {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}