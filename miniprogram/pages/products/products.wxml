<!-- 顶部自定义导航栏 -->
<view class="header">
  <view class="back-icon" bindtap="goBack"></view>
  <text class="header-title">MT</text>
  <view style="width: 24rpx;"></view>
</view>

<!-- 
   easing-function="easeInOutCubic": 让 Swiper 间距撑开的过程本身也带缓冲
   duration="800": 配合 CSS 的 0.8s 动画时长 
-->
<swiper 
  class="card-swiper" 
  vertical="true" 
  previous-margin="{{isLoaded ? finalMargin : 0}}px" 
  next-margin="{{isLoaded ? finalMargin : 0}}px" 
  bindchange="onSwiperChange"
  circular="{{true}}"
  duration="800"
  easing-function="easeInOutCubic"
>
  <block wx:for="{{list}}" wx:key="id">
    <swiper-item class="card-wrapper">
      <!-- 
         样式逻辑：
         1. isLoaded ? 'spread' : 'overlap' -> 决定是堆叠还是炸开
         2. currentIndex === index ? 'active' : '' -> 决定谁是主角
      -->
      <view 
        class="card {{isLoaded ? 'spread' : 'overlap'}} {{currentIndex === index ? 'active' : ''}}"
        catchtap="onCardTap"
        data-id="{{item.id}}"
        data-title="{{item.title}}"
      >
        
        <!-- 左侧文字 -->
        <view class="card-info">
          <view class="card-title">{{item.title}}</view>
          <view class="card-sub">{{item.en}}</view>
        </view>
        
        <!-- 右侧图标容器 -->
        <view class="icon-container" style="background: {{item.gradient}}">
          <image class="svg-icon" src="{{item.iconSvg}}" mode="aspectFit"></image>
        </view>

      </view>
    </swiper-item>
  </block>
</swiper>
